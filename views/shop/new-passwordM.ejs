<%- include('../layouts/headerM.ejs') %>
<%- include('../layouts/navigationM.ejs') %>


<!-- PARALLAX BANNER -->
<div class="breadcrumb parallax-container">
  <div class="parallax"><img src="/images/prlx.jpg" alt="#"></div>
  <h1>New Password</h1>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/login">Login</a></li>
    <li><a href="/reset-password">Forgotten Password</a></li>
    <li><a href="">New Password</a></li>
  </ul>
</div>
<!-- End of PARALLAX BANNER -->

<!-- BELLOW BANNER CONTENT -->
<div class="container">
  <div class="row">

    <!-- ACCOUNT SIDEBAR -->
    <%- include('../layouts/sidebar-accountM.ejs') %>


    <!-- FORGOT PASSWORD SIDE -->
    <div id="content" class="col-sm-9">

      <!-- FLASH MESSAGES -->
      <%- include('../layouts/flashMessages.ejs') %>
      
      <h1>Reset Your Password</h1>
      <p>Enter new password below. Click continue to proceed!</p>

      <form action="/new-password" method="post" enctype="multipart/form-data" class="form-horizontal">

        <fieldset>
          <legend>Your New Password</legend>
          <% if(valErrors.find(err => err.param === 'password')) { 
            const index = valErrors.findIndex(err => err.param === 'password'); %>
            <div class="alert alert-danger"><%= valErrors[index].msg %></div>
          <% } %>
          <div class="form-group required">
            <label class="col-sm-3 control-label" for="input-password">Password</label>
            <div class="col-sm-9">
              <input type="password" name="password" value="" placeholder="Password" id="input-password" class="form-control">
            </div>
          </div>
        
          <% if(valErrors.find(err => err.param === 'confirmPassword')) { 
            const index = valErrors.findIndex(err => err.param === 'confirmPassword'); %>
            <div class="alert alert-danger"><%= valErrors[index].msg %></div>
          <% } %>
          <div class="form-group required">
            <label class="col-sm-3 control-label" for="input-password">Confirm Password</label>
            <div class="col-sm-9">
              <input type="password" name="confirmPassword" value="" placeholder="Confirm password" id="input-confirmPassword" class="form-control">
            </div>
          </div>
        </fieldset>

        <div class="buttons clearfix">
          <div class="pull-left"><a href="/reset-password" class="btn btn-default">Back</a></div>
          <div class="pull-right">

            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <input type="hidden" name="userId" value="<%= userId %>">
            <input type="hidden" name="passwordToken" value="<%= passwordToken %>">

            <input type="submit" value="Continue" class="btn btn-primary">
          </div>
        </div>
      </form>

    </div>
    <!-- End of FORGOT PASSWORD SIDE -->
  </div>
</div>
<!-- End of BELOW BANNER CONTENT -->


<%- include('../layouts/footerM.ejs') %>

