<%- include('../layouts/header.ejs') %>

<h2><%= title %></h2>
<hr>

<div class="row prods">
	<% products.forEach(product => { %>
		<div class="col-xs-12 col-md-4 prodMrg">
			<a class="prodDisp" href="/products/<%= product.category %>/<%= product.slug %>">
				<img class="imgWdh" src="/images/products/<%= product.firstSlug %>/<%= product.image %>">
			</a>
			<h5><%= product.title %></h4>
			<h6>$ <%= parseFloat(product.price).toFixed(2) %></h5>
			<a href="/products/<%= product.category %>/<%= product.slug %>">View details</a>
		</div>
	<% }) %>
</div>

<!-- PAGINATION -->
<nav>
	<ul class="pagination justify-content-center pagination-sm">
		<li class="page-item <% if(prevPage < 1) { %>disabled<% } %>"><a class="page-link" href="?page=<%= prevPage %>">&lsaquo;Prev</a></li>
		<% if(currentPage > 1) { %>  
			<li class="page-item"><a class="page-link" href="?page=1">1</a></li>
		<% } %>
		<% if(currentPage - 2 > 1) { %>
			<li class="page-item disabled"><a class="page-link" href="#">...</a></li>
		<% } %>
		<% if(prevPage > 1) { %>
			<li class="page-item"><a class="page-link" href="?page=<%= prevPage %>"><%= prevPage %></a></li>
		<% } %>
		<li class="page-item active"><a class="page-link" href="?page=<%= currentPage %>"><%= currentPage %></a></li>
		<% if(nextPage < lastPage) { %>
			<li class="page-item"><a class="page-link" href="?page=<%= nextPage %>"><%= nextPage %></a></li>
		<% } %>
		<% if(currentPage + 2 < lastPage) { %>
			<li class="page-item disabled"><a class="page-link" href="#">...</a></li>
		<% } %>
		<% if(currentPage < lastPage) { %>
		  	<li class="page-item"><a class="page-link" href="?page=<%= lastPage %>"><%= lastPage %></a></li>
		<% } %>
	  	<li class="page-item <% if(nextPage > lastPage) { %>disabled<% } %>"><a class="page-link" href="?page=<%= nextPage %>">Next&rsaquo;</a></li>
	</ul>
</nav>
<!-- End of PAGINATION -->

<%- include('../layouts/footer.ejs') %>